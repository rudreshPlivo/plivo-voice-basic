{"version":3,"sources":["../../src/routes/playurl.js"],"names":["plivo","router","express","Router","post","req","res","next","console","log","response","Response","speakBody","playBody","dialNumber","addPlay","dial","addDial","addNumber","toXML","type","send","error"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;IAAYA,K;;;;;;AAEZ,IAAMC,SAASC,kBAAQC,MAAR,EAAf;;AAEAF,OAAOG,IAAP,CAAY,GAAZ,EAAgB,UAACC,GAAD,EAAKC,GAAL,EAASC,IAAT,EAAiB;AAC7BC,YAAQC,GAAR;AACA,QAAIC,WAAWV,MAAMW,QAAN,EAAf;AACA,QAAIC,8DAAJ;AACA,QAAIC,4DAAJ;AACA;;AAEA;AACA,QAAIC,aAAa,cAAjB;;AAEA;AACAJ,aAASK,OAAT,CAAiBF,QAAjB;;AAEA;AACA,QAAIG,OAAON,SAASO,OAAT,EAAX;AACAD,SAAKE,SAAL,CAAeJ,UAAf;;AAEAN,YAAQC,GAAR;AACAD,YAAQC,GAAR,CAAYC,SAASS,KAAT,EAAZ;AACA,QAAI;AACAb,YAAIc,IAAJ,CAAS,iBAAT;AACAd,YAAIe,IAAJ,CAASX,SAASS,KAAT,EAAT;AACH,KAHD,CAGE,OAAOG,KAAP,EAAc;AACZd,gBAAQC,GAAR,mDAA4Da,KAA5D;AACAf,aAAKe,KAAL;AACH;AACJ,CA1BD;;kBA4BerB,M","file":"playurl.js","sourcesContent":["import express from \"express\";\nimport env from \"./../config/env\";\nimport * as plivo from \"plivo\";\n\nconst router = express.Router();\n\nrouter.post('/',(req,res,next)=> {\n    console.log(`xml request called`);\n    var response = plivo.Response();\n    var speakBody = `This call will be terminated in next few seconds`;\n    var playBody = `https://s3.amazonaws.com/plivocloud/Trumpet.mp3`;\n    //response.addSpeak(speakBody);\n\n    //number to be dialled\n    var dialNumber = '916355456975';\n\n    //first add the play tag \n    response.addPlay(playBody);\n\n    //add dial and number tags <Dial><Number>dialNumber</Number></Dial>\n    var dial = response.addDial();\n    dial.addNumber(dialNumber);\n    \n    console.log(`response XML ready`);\n    console.log(response.toXML());\n    try {\n        res.type('application/xml');\n        res.send(response.toXML());\n    } catch (error) {\n        console.log(`something went wrong with answer url error - ${error}`);\n        next(error);\n    }\n});\n\nexport default router;"]}