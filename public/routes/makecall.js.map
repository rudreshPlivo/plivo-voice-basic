{"version":3,"sources":["../../src/routes/makecall.js"],"names":["plivo","router","express","Router","post","req","res","next","console","log","JSON","stringify","body","callData","toNumber","fromNumber","answerUrl","client","CLient","env","AUTH_ID","AUTH_TOKEN","calls","create","then","response","catch","err","error"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;IAAYA,K;;;;;;AAEZ,IAAMC,SAASC,kBAAQC,MAAR,EAAf;;AAEAF,OAAOG,IAAP,CAAY,GAAZ,EAAgB,UAACC,GAAD,EAAKC,GAAL,EAASC,IAAT,EAAkB;AAC9B;AACAC,YAAQC,GAAR,CAAYC,KAAKC,SAAL,CAAeN,IAAIO,IAAnB,CAAZ;;AAEA,QAAMC,WAAWR,IAAIO,IAArB;AACA,QAAIE,WAAWD,SAASC,QAAxB;AACA,QAAIC,aAAaF,SAASE,UAA1B;AACA,QAAIC,oDAAJ;;AAEA,QAAI;AACA,YAAIC,SAAS,IAAIjB,MAAMkB,MAAV,CAAiBC,cAAIC,OAArB,EAA6BD,cAAIE,UAAjC,CAAb;AACAJ,eAAOK,KAAP,CAAaC,MAAb,CACIR,UADJ,EAEID,QAFJ,EAGIE,SAHJ,EAKCQ,IALD,CAKM,UAACC,QAAD,EAAc;AAChBjB,oBAAQC,GAAR,wCAAiDgB,QAAjD;AACH,SAPD,EAQCC,KARD,CAQO,UAACC,GAAD,EAAS;AACZnB,oBAAQC,GAAR,wCAAiDkB,GAAjD;AACH,SAVD;AAWH,KAbD,CAaE,OAAOC,KAAP,EAAc,CAEf;AAEJ,CA1BD;;kBA4Be3B,M","file":"makecall.js","sourcesContent":["import express from \"express\";\nimport env from \"./../config/env\";\nimport * as plivo from \"plivo\";\n\nconst router = express.Router();\n\nrouter.post('/',(req,res,next) => {\n    //call api\n    console.log(JSON.stringify(req.body));\n    \n    const callData = req.body;\n    var toNumber = callData.toNumber;\n    var fromNumber = callData.fromNumber;\n    var answerUrl = `https://pl-voice.herokuapp.com/playurl`;\n\n    try {\n        var client = new plivo.CLient(env.AUTH_ID,env.AUTH_TOKEN);\n        client.calls.create(\n            fromNumber,\n            toNumber,\n            answerUrl\n        )\n        .then((response) => {\n            console.log(`Success: response from plivo is - ${response}`);\n        })\n        .catch((err) => {\n            console.log(`something went wrong with plivo - ${err}`);\n        });\n    } catch (error) {\n        \n    }\n\n});\n\nexport default router;"]}